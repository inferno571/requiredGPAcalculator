<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JIIT Target CGPA Calculator</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        /* Custom Styles for Dark Mode */
        .dark-mode {
            background-color: #121212;
            color: #e0e0e0;
        }

        .dark-mode .result {
            background-color: #1e1e1e;
            color: #e0e0e0;
        }

        .dark-mode input,
        .dark-mode button,
        .dark-mode label {
            background-color: #1e1e1e;
            color: #e0e0e0;
            border-color: #333;
        }

        .dark-mode header {
            background-color: #333;
        }

        /* Improved UI Styles */
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f5f5f5;
        }

        header {
            background-color: #006d77;
            color: #ffffff;
        }

        header h1 {
            font-size: 1.5rem;
            font-weight: bold;
        }

        button {
            transition: all 0.3s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
        }

        .form-group label {
            font-weight: 500;
            margin-bottom: 0.5rem;
            display: block;
        }

        .form-group input {
            padding: 0.75rem;
            border-radius: 0.375rem;
            border: 1px solid #d1d5db;
            width: 100%;
        }

        .form-group input:focus {
            outline: none;
            border-color: #10b981;
            box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.25);
        }

        .result h3 {
            font-size: 1.25rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }

        .impossible {
            font-size: 1.25rem;
            font-weight: bold;
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>

<body class="bg-gray-100">
    <header class="flex justify-between items-center py-4 px-8">
        <img src="jiit-logo.png" alt="JIIT Logo" class="h-12">
        <h1>JIIT Target CGPA Calculator</h1>
    </header>

    <div class="max-w-3xl mx-auto p-8 mt-8 bg-white rounded-lg shadow-lg">
        <button onclick="toggleDarkMode()" class="py-2 px-4 bg-teal-500 text-white rounded-md hover:bg-teal-400">Toggle
            Dark Mode</button>

        <p class="text-red-500 mt-4">Note: Please enter the number of <strong>completed semesters</strong> (e.g., if
            you're in the 4th semester, enter 3).</p>

        <form id="cgpaForm" class="mt-6 space-y-6">
            <div class="form-group">
                <label for="currentCGPA" class="block text-lg">Current CGPA:</label>
                <input type="number" id="currentCGPA" step="0.01" required
                    class="w-full p-2 border border-gray-300 rounded-md" />
            </div>
            <div class="form-group">
                <label for="completedSemesters" class="block text-lg">Completed Semesters (1-7):</label>
                <input type="number" id="completedSemesters" min="1" max="7" required
                    class="w-full p-2 border border-gray-300 rounded-md" />
            </div>
            <div class="form-group">
                <label for="targetCGPA" class="block text-lg">Target CGPA:</label>
                <input type="number" id="targetCGPA" step="0.01" required
                    class="w-full p-2 border border-gray-300 rounded-md" />
            </div>
            <button type="button" onclick="calculateSGPA()"
                class="w-full py-2 bg-teal-500 text-white rounded-md hover:bg-teal-400">Calculate</button>
        </form>

        <div id="result" class="result mt-8 p-4 bg-gray-50 hidden rounded-md">
            <h3>Results:</h3>
            <div id="semesterResults"></div>
        </div>

        <div id="impossibleMessage" class="impossible mt-8 p-4 hidden bg-red-600 text-white text-center rounded-md">
            The entered target CGPA is not achievable. You are cooked.
        </div>
    </div>

    <script>
        function toggleDarkMode() {
            document.body.classList.toggle("dark-mode");
        }

        function calculateSGPA() {
            const currentCGPA = parseFloat(document.getElementById("currentCGPA").value);
            const completedSemesters = parseInt(document.getElementById("completedSemesters").value);
            const targetCGPA = parseFloat(document.getElementById("targetCGPA").value);

            if (isNaN(currentCGPA) || isNaN(completedSemesters) || isNaN(targetCGPA)) {
                alert("Please enter valid numeric values for all fields.");
                return;
            }

            if (currentCGPA < 0 || currentCGPA > 10 || targetCGPA < 0 || targetCGPA > 10) {
                alert("CGPA values must be between 0 and 10.");
                return;
            }

            if (completedSemesters < 1 || completedSemesters > 7) {
                alert("Completed semesters must be between 1 and 7.");
                return;
            }

            const credits = [18.5, 20.5, 23, 20, 23, 23, 16, 17];
            let completedCredits = 0;

            // Calculate completed credits
            for (let i = 0; i < completedSemesters; i++) {
                completedCredits += credits[i];
            }

            // Prepare results dynamically for each remaining semester
            const remainingSemesters = credits.slice(completedSemesters);
            const semesterResultsDiv = document.getElementById("semesterResults");
            semesterResultsDiv.innerHTML = ""; // Clear previous results

            let cumulativeCredits = completedCredits;
            let isAchievableBy8th = true;

            remainingSemesters.forEach((semesterCredits, index) => {
                cumulativeCredits += semesterCredits;
                const semesterNumber = completedSemesters + index + 1;
                const requiredSGPA = (targetCGPA * cumulativeCredits - currentCGPA * completedCredits) / (cumulativeCredits - completedCredits);

                const resultText = `Average SGPA needed by the end of semester ${semesterNumber}: ${
                    requiredSGPA > 10 ? "Impossible to achieve" : requiredSGPA.toFixed(2)
                }`;

                const paragraph = document.createElement("p");
                paragraph.textContent = resultText;
                semesterResultsDiv.appendChild(paragraph);

                // Check if target CGPA is achievable by the end of the 8th semester
                if (semesterNumber === 8 && requiredSGPA > 10) {
                    isAchievableBy8th = false;
                }
            });

            // Display appropriate message
            if (!isAchievableBy8th) {
                document.getElementById("impossibleMessage").style.display = "block";
                document.getElementById("result").style.display = "none";
            } else {
                document.getElementById("impossibleMessage").style.display = "none";
                document.getElementById("result").style.display = "block";
            }
        }
    </script>
</body>

</html>
